<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Encryption </title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>❤️</text></svg>">
    <style>
        :root {
            --bg: #ffebf0;
            --card: rgba(255, 240, 246, 0.8);
            --muted: #c08497;
            --accent: #e11d48;
            --accent-hover: #be123c;
            --border: rgba(249, 168, 212, 0.5);
            --text: #5a2a3b;
            --text-dark: #1f0f17;
            --shadow: rgba(225, 29, 72, 0.15);
            --dark-bg: #071020;
            --dark-card: rgba(11, 22, 48, 0.8);
            --dark-muted: #8b5cf6;
            --dark-accent: #ec4899;
            --dark-border: rgba(126, 34, 206, 0.5);
            --dark-text: #e6eef8;
            --glass-blur: blur(10px);
            --glass-border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: "Comic Sans MS", cursive, sans-serif;
            background: linear-gradient(120deg, #ffe6eb 0%, #ffd6e0 50%, #fbcfe8 100%);
            color: var(--text);
            padding: 20px;
            overflow-x: hidden;
            min-height: 100vh;
            transition: background 0.5s ease, color 0.5s ease;
        }
        
        .wrap {
            max-width: 920px;
            margin: 0 auto;
            position: relative;
        }
        
        header {
            text-align: center;
            margin-bottom: 18px;
            padding: 0 10px;
        }
        
        h1 {
            margin: 0;
            font-size: 26px;
            color: var(--accent);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        p.lead {
            margin: 10px 0 0;
            color: var(--muted);
            font-size: 15px;
            line-height: 1.4;
        }
        
        .card {
            background: var(--card);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: var(--glass-border);
            border: 2px solid var(--border);
            padding: 20px;
            border-radius: 18px;
            margin-top: 18px;
            box-shadow: 0 8px 32px rgba(225, 29, 72, 0.1);
        }
        
        label {
            font-size: 14px;
            color: var(--muted);
            display: block;
            margin-bottom: 6px;
        }
        
        textarea, input[type=text], input[type=password], select {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            border: 2px solid var(--border);
            background: rgba(255, 255, 255, 0.7);
            color: var(--text);
            resize: vertical;
            font-family: inherit;
            font-size: 14px;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        textarea:focus, input:focus, select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(225, 29, 72, 0.2);
            background: rgba(255, 255, 255, 0.9);
        }
        
        .controls {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        button {
            background: var(--accent);
            color: white;
            padding: 10px 16px;
            border-radius: 20px;
            border: 0;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(225, 29, 72, 0.3);
            transition: all 0.2s;
            font-family: inherit;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        button:hover {
            transform: translateY(-2px);
            background: var(--accent-hover);
            box-shadow: 0 6px 16px rgba(225, 29, 72, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button.ghost {
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid var(--border);
            color: var(--accent);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        button.ghost:hover {
            background: rgba(249, 168, 212, 0.2);
        }
        
        .output {
            white-space: pre-wrap;
            background: rgba(255, 255, 255, 0.7);
            padding: 15px;
            border-radius: 12px;
            border: 2px solid var(--border);
            min-height: 80px;
            color: var(--text);
            font-size: 14px;
            line-height: 1.4;
            word-break: break-word;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        .small {
            font-size: 13px;
            color: var(--muted);
            line-height: 1.4;
        }
        
        .heart {
            position: fixed;
            font-size: 20px;
            color: var(--accent);
            animation: floatUp 6s linear forwards;
            opacity: 0.6;
            pointer-events: none;
            z-index: 1;
            text-shadow: 0 0 10px rgba(225, 29, 72, 0.5);
        }
        
        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(1);
                opacity: 0.6;
            }
            100% {
                transform: translateY(-100vh) scale(1.5);
                opacity: 0;
            }
        }
        
        .mode-btns {
            margin-top: 18px;
            text-align: center;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        
        .mode-btns button {
            margin: 0;
            padding: 10px 18px;
            border-radius: 14px;
            font-size: 14px;
        }
        
        .input-row {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .input-row > div {
            flex: 1;
            min-width: 200px;
        }
        
        /* Dark mode styles */
        body.dark-mode {
            background: linear-gradient(120deg, #071020 0%, #0b1630 50%, #1e1b4b 100%);
            color: var(--dark-text);
        }
        
        body.dark-mode .card {
            background: var(--dark-card);
            border-color: var(--dark-border);
            box-shadow: 0 8px 32px rgba(236, 72, 153, 0.1);
        }
        
        body.dark-mode textarea,
        body.dark-mode input[type=text],
        body.dark-mode input[type=password],
        body.dark-mode select {
            background: rgba(30, 41, 59, 0.7);
            color: var(--dark-text);
            border-color: var(--dark-border);
        }
        
        body.dark-mode textarea:focus,
        body.dark-mode input:focus,
        body.dark-mode select:focus {
            background: rgba(30, 41, 59, 0.9);
        }
        
        body.dark-mode label {
            color: var(--dark-muted);
        }
        
        body.dark-mode h1 {
            color: var(--dark-accent);
        }
        
        body.dark-mode .small {
            color: var(--dark-muted);
        }
        
        body.dark-mode button {
            background: var(--dark-accent);
            box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
        }
        
        body.dark-mode button:hover {
            background: #db2777;
            box-shadow: 0 6px 16px rgba(236, 72, 153, 0.4);
        }
        
        body.dark-mode button.ghost {
            background: rgba(30, 41, 59, 0.3);
            border-color: var(--dark-border);
            color: var(--dark-accent);
        }
        
        body.dark-mode .heart {
            color: var(--dark-accent);
            text-shadow: 0 0 10px rgba(236, 72, 153, 0.5);
        }
        
        body.dark-mode .output {
            background: rgba(30, 41, 59, 0.7);
            color: var(--dark-text);
            border-color: var(--dark-border);
        }
        
        /* Media queries for responsiveness */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            .card {
                padding: 15px;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .controls button {
                width: 100%;
                justify-content: center;
            }
            
            .input-row {
                flex-direction: column;
                gap: 12px;
            }
            
            .input-row > div {
                min-width: 100%;
            }
            
            .mode-btns {
                flex-direction: column;
                align-items: center;
            }
            
            .mode-btns button {
                width: 200px;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 22px;
            }
            
            p.lead {
                font-size: 14px;
            }
            
            button {
                padding: 8px 14px;
                font-size: 13px;
            }
            
            textarea, input[type=text], input[type=password], select {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="wrap">
        <header>
            <h1>🔒 Love Encryption ❤️</h1>
            <p class="lead">Keep your secret love notes safe. Only your partner with the right key can unlock them. 💌</p>
        </header>

        <div class="mode-btns">
            <button id="normalMode">🌐 Normal Mode</button>
            <button id="loverMode">💕 Lover Mode</button>
        </div>

        <div class="card">
            <label for="algorithm">Choose our love lock style 🔐</label>
            <select id="algorithm">
                <option value="aes">🔒 Love Lock (Super Secret)</option>
                <option value="base64">🍭 Candy Code (Sweet & Simple)</option>
                <option value="caesar">🤡 Silly Shift (Alphabet Shuffle)</option>
            </select>

            <div id="key-area" style="margin-top:16px">
                <div class="input-row">
                    <div id="password-container">
                        <label for="password">Your Secret Word 💕</label>
                        <input id="password" type="password" placeholder="Enter secret word" />
                    </div>
                    <div id="shift-container">
                        <label for="shift">Shift 🔄</label>
                        <input id="shift" type="text" inputmode="numeric" pattern="[0-9]*" placeholder="3" />
                    </div>
                </div>
                <div class="small" style="margin-top:10px">Remember: only your lover with the same secret word can open the message 💑</div>
            </div>

            <div style="margin-top:16px">
                <label for="input">Write your love note 💌</label>
                <textarea id="input" rows="6" placeholder="Type your sweetest words here..."></textarea>
            </div>

            <div class="controls">
                <button id="encryptBtn">🔒 Encrypt with Love</button>
                <button id="decryptBtn" class="ghost">🔓 Unlock Love</button>
                <button id="copyBtn" class="ghost">📋 Copy Message</button>
                <button id="clearBtn" class="ghost">🧹 Clear</button>
            </div>

            <div style="margin-top:16px">
                <label>Result 💖</label>
                <div id="output" class="output"></div>
            </div>

            <div class="small" style="margin-top:12px">✨ Works only in your browser — no one else can read your love 💘</div>
        </div>
    </div>
    <!-- Footer Section -->
 <footer >
    
        <!-- Copyright -->
        <p style="margin-top:20px; font-size:14px; color:#777; text-align:center">
            © 2025 NTS_Nithish | All Rights Reserved
        </p>
    </div>
</footer>

<!-- Font Awesome for Icons -->
<script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script>

    <script>
        // Mode switcher
        const body = document.body;
        const normalBtn = document.getElementById('normalMode');
        const loverBtn = document.getElementById('loverMode');
        
        // Check for saved theme preference or respect OS preference
        const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
        const savedTheme = localStorage.getItem('theme');
        
        if (savedTheme === 'dark' || (!savedTheme && prefersDarkScheme.matches)) {
            body.classList.add('dark-mode');
            normalBtn.textContent = '🌙 Dark Mode';
        } else {
            body.classList.remove('dark-mode');
            normalBtn.textContent = '🌐 Normal Mode';
        }

        normalBtn.addEventListener('click', () => {
            if (body.classList.contains('dark-mode')) {
                body.classList.remove('dark-mode');
                localStorage.setItem('theme', 'light');
                normalBtn.textContent = '🌐 Normal Mode';
                clearHearts();
            } else {
                body.classList.add('dark-mode');
                localStorage.setItem('theme', 'dark');
                normalBtn.textContent = '🌙 Dark Mode';
                clearHearts();
            }
        });
        
        loverBtn.addEventListener('click', () => {
            body.classList.remove('dark-mode');
            localStorage.setItem('theme', 'light');
            startHearts();
        });

        // Floating hearts animation
        let heartInterval = null;
        const hearts = [];
        
        function createHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.textContent = '❤';
            heart.style.left = Math.random() * window.innerWidth + 'px';
            heart.style.top = window.innerHeight + 'px';
            heart.style.fontSize = (16 + Math.random() * 20) + 'px';
            document.body.appendChild(heart);
            
            // Store reference for cleanup
            hearts.push(heart);
            
            // Remove heart after animation completes
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                    // Remove from array
                    const index = hearts.indexOf(heart);
                    if (index > -1) {
                        hearts.splice(index, 1);
                    }
                }
            }, 6000);
        }
        
        function startHearts() {
            // Clear any existing interval and hearts
            clearHearts();
            
            // Start new interval
            heartInterval = setInterval(createHeart, 800);
        }
        
        function clearHearts() {
            // Clear the interval
            if (heartInterval) {
                clearInterval(heartInterval);
                heartInterval = null;
            }
            
            // Remove all hearts from DOM and array
            hearts.forEach(heart => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                }
            });
            
            // Clear the array
            hearts.length = 0;
        }
        
        // Start with hearts if in light mode
        if (!body.classList.contains('dark-mode')) {
            startHearts();
        }

        // Handle window resize - reposition hearts
        window.addEventListener('resize', () => {
            hearts.forEach(heart => {
                heart.style.left = Math.random() * window.innerWidth + 'px';
            });
        });

        // Encryption functions
        const enc = new TextEncoder();
        const dec = new TextDecoder();
        
        function toBase64(buffer) {
            const bytes = new Uint8Array(buffer);
            let binary = '';
            for (let i = 0; i < bytes.byteLength; i++) {
                binary += String.fromCharCode(bytes[i]);
            }
            return btoa(binary);
        } 
        
        function fromBase64(b64) {
            const binary = atob(b64);
            const bytes = new Uint8Array(binary.length);
            for (let i = 0; i < binary.length; i++) {
                bytes[i] = binary.charCodeAt(i);
            }
            return bytes.buffer;
        }

        async function deriveKey(password, salt) {
            const pwKey = await crypto.subtle.importKey(
                'raw', 
                enc.encode(password), 
                {name: 'PBKDF2'}, 
                false, 
                ['deriveKey']
            );
            
            return crypto.subtle.deriveKey(
                {
                    name: 'PBKDF2',
                    salt: salt,
                    iterations: 250000,
                    hash: 'SHA-256'
                },
                pwKey,
                {name: 'AES-GCM', length: 256},
                false,
                ['encrypt', 'decrypt']
            );
        }

        async function encryptAES(plaintext, password) {
            const salt = crypto.getRandomValues(new Uint8Array(16));
            const iv = crypto.getRandomValues(new Uint8Array(12));
            const key = await deriveKey(password, salt.buffer);
            const ct = await crypto.subtle.encrypt(
                {name: 'AES-GCM', iv: iv},
                key,
                enc.encode(plaintext)
            );
            
            return `${toBase64(salt)}:${toBase64(iv)}:${toBase64(ct)}`;
        }
        
        async function decryptAES(packageStr, password) {
            const parts = packageStr.split(':');
            if (parts.length !== 3) throw new Error('Invalid format');
            
            const salt = fromBase64(parts[0]);
            const iv = new Uint8Array(fromBase64(parts[1]));
            const ct = fromBase64(parts[2]);
            const key = await deriveKey(password, salt);
            
            try {
                const plainBuf = await crypto.subtle.decrypt(
                    {name: 'AES-GCM', iv: iv},
                    key,
                    ct
                );
                return dec.decode(plainBuf);
            } catch (e) {
                throw new Error('Decryption failed. Wrong password?');
            }
        }

        function encodeBase64(text) {
            const u8 = enc.encode(text);
            return toBase64(u8);
        } 
        
        function decodeBase64(b64) {
            try {
                const buf = fromBase64(b64);
                return dec.decode(buf);
            } catch (e) {
                throw new Error('Invalid Base64 string');
            }
        } 

        function caesarEncrypt(text, shift) {
            shift = parseInt(shift) || 0;
            return text.split('').map(ch => {
                const code = ch.charCodeAt(0);
                if (code >= 65 && code <= 90) { // A-Z
                    return String.fromCharCode(((code - 65 + shift) % 26) + 65);
                }
                if (code >= 97 && code <= 122) { // a-z
                    return String.fromCharCode(((code - 97 + shift) % 26) + 97);
                }
                return ch;
            }).join('');
        }
        
        function caesarDecrypt(text, shift) {
            shift = parseInt(shift) || 0;
            return caesarEncrypt(text, (26 - (shift % 26)));
        }

        // DOM elements
        const algorithmEl = document.getElementById('algorithm');
        const passwordEl = document.getElementById('password');
        const shiftEl = document.getElementById('shift');
        const inputEl = document.getElementById('input');
        const outputEl = document.getElementById('output');
        const encryptBtn = document.getElementById('encryptBtn');
        const decryptBtn = document.getElementById('decryptBtn');
        const copyBtn = document.getElementById('copyBtn');
        const clearBtn = document.getElementById('clearBtn');
        const passwordContainer = document.getElementById('password-container');
        const shiftContainer = document.getElementById('shift-container');

        // Set initial visibility
        function setVisibility() {
            const algo = algorithmEl.value;
            
            if (algo === 'aes') {
                passwordContainer.style.display = 'block';
                shiftContainer.style.display = 'none';
            } else if (algo === 'base64') {
                passwordContainer.style.display = 'none';
                shiftContainer.style.display = 'none';
            } else if (algo === 'caesar') {
                passwordContainer.style.display = 'none';
                shiftContainer.style.display = 'block';
            }
        }
        
        algorithmEl.addEventListener('change', setVisibility);
        setVisibility();

        // Encrypt button handler
        encryptBtn.addEventListener('click', async () => {
            const algo = algorithmEl.value;
            const text = inputEl.value.trim();
            
            try {
                if (!text) {
                    outputEl.textContent = '(no input)';
                    return;
                }
                
                if (algo === 'aes') {
                    if (!passwordEl.value) {
                        outputEl.textContent = 'Please enter your secret word 💕';
                        return;
                    }
                    outputEl.textContent = await encryptAES(text, passwordEl.value);
                } else if (algo === 'base64') {
                    outputEl.textContent = encodeBase64(text);
                } else if (algo === 'caesar') {
                    outputEl.textContent = caesarEncrypt(text, shiftEl.value);
                }
            } catch (err) {
                outputEl.textContent = 'Error: ' + err.message;
            }
        });

        // Decrypt button handler
        decryptBtn.addEventListener('click', async () => {
            const algo = algorithmEl.value;
            const text = inputEl.value.trim();
            
            try {
                if (!text) {
                    outputEl.textContent = '(no input)';
                    return;
                }
                
                if (algo === 'aes') {
                    if (!passwordEl.value) {
                        outputEl.textContent = 'Please enter the secret word to unlock 💞';
                        return;
                    }
                    outputEl.textContent = await decryptAES(text, passwordEl.value);
                } else if (algo === 'base64') {
                    outputEl.textContent = decodeBase64(text);
                } else if (algo === 'caesar') {
                    outputEl.textContent = caesarDecrypt(text, shiftEl.value);
                }
            } catch (err) {
                outputEl.textContent = 'Error: ' + err.message;
            }
        });

        // Copy button handler
        copyBtn.addEventListener('click', () => {
            const txt = outputEl.textContent;
            if (!txt) return;
            
            navigator.clipboard.writeText(txt).then(() => {
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'Copied 💘';
                
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                }, 1200);
            }).catch(err => {
                outputEl.textContent = 'Failed to copy: ' + err;
            });
        });

        // Clear button handler
        clearBtn.addEventListener('click', () => {
            inputEl.value = '';
            outputEl.textContent = '';
            passwordEl.value = '';
            shiftEl.value = '3';
        });

        // Set default shift value
        shiftEl.value = '3';
        
        // Add Enter key support for form elements
        inputEl.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) {
                encryptBtn.click();
            }
        });
        
        passwordEl.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                encryptBtn.click();
            }
        });
    </script>
</body>
</html>